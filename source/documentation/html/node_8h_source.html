<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rival_Engine: H:/RivalEngine/Rival_Game_Engine_GIT/Rival3dengine/source/game/node.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rival_Engine
   &#160;<span id="projectnumber">0.00.1</span>
   </div>
   <div id="projectbrief">Quick undocumented run to get full recursive list of elements</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_37c6514aeece95293041e34c0f2e0784.html">game</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">node.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//list of class defines</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">struct </span><a class="code" href="structbulletobj.html">bulletobj</a>;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">struct </span><a class="code" href="structridgidbody.html">ridgidbody</a>;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">struct </span>editnode;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">struct </span><a class="code" href="structnode.html">node</a>;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">struct </span><a class="code" href="structscenegraph.html">scenegraph</a>;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">struct </span><a class="code" href="structworld.html">world</a>;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">struct </span><a class="code" href="structscriptinterface.html">scriptinterface</a>;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">struct </span>savenode;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">struct </span><a class="code" href="structlight.html">light</a>;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//list includes</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;AJMPhys.h&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//list of externs and global variables</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define FROM_SAUER_VEC(sauervec) ( btVector3(sauervec.x/SAUER_FACTOR, sauervec.z/SAUER_FACTOR, sauervec.y/SAUER_FACTOR) )</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#define TO_SAUER_VEC(sauervec, btvec) { sauervec.x = btvec.x()*SAUER_FACTOR; sauervec.y = btvec.z()*SAUER_FACTOR; sauervec.z = btvec.y()*SAUER_FACTOR; }</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">enum</span> NODE_FLAGS</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    NODE_ACTIVE = 1 &lt;&lt; 0, <span class="comment">//is the node active, is it sleeping or is it dead?</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    NODE_SERIALIZED = 1 &lt;&lt; 1, <span class="comment">//is this node serializing its self or should we delete it on reset</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    NODE_START_ON_RESET = 1 &lt;&lt; 2 <span class="comment">//Should we let this item sleep or should we run the onstart as soon as we call a reset</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;};</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//class declarations</span></div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="structridgidbody.html">   25</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structridgidbody.html">ridgidbody</a> <span class="comment">// tempclass for setting up bullet, this gets deleted and converted into btRidgidBody which is used for updating entities</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordtype">float</span> friction, weight, restitution, ldamp, adamp;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="structvec.html">vec</a> afactor, lfactor, gravity;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordtype">int</span> type;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">//bool staticobj; // set weight to 0 or less to make an object static</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="structvec.html">vec</a> radius, center, rot, o;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="structridgidbody.html">ridgidbody</a>();</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordtype">void</span> aabbfrommodel(<span class="keywordtype">int</span> index); <span class="comment">//moved to AJPhyis.cpp due to model not being inited yet</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;};</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structbulletobj.html">   36</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbulletobj.html">bulletobj</a></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    btRigidBody *btridgidbody;  <span class="comment">//change to a vector later</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="structridgidbody.html">ridgidbody</a> *tempbody; <span class="comment">//stored object data</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="structbulletobj.html">bulletobj</a>() : btridgidbody(NULL), tempbody(NULL){}</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">void</span> move(<a class="code" href="structvec.html">vec</a> im);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">void</span> rotate(<a class="code" href="structvec.html">vec</a> im);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordtype">void</span> moveto(<a class="code" href="structvec.html">vec</a> _o);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    ~<a class="code" href="structbulletobj.html">bulletobj</a>(){ <span class="keywordflow">if</span>(btridgidbody)<span class="keyword">delete</span> btridgidbody; <span class="keywordflow">if</span>(tempbody) <span class="keyword">delete</span> tempbody; }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;};</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structscriptinterface.html">   48</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structscriptinterface.html">scriptinterface</a></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="classas_i_script_object.html">asIScriptObject</a> *object;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="class_c_serialized_value.html">CSerializedValue</a> *saveData;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordtype">int</span> typeID;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="structscriptinterface.html">scriptinterface</a>(<a class="code" href="classas_i_script_object.html">asIScriptObject</a> *<a class="code" href="structobj.html">obj</a>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">bool</span> restore();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">void</span> save();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">void</span> setData(str name, <span class="keywordtype">void</span> *val, <span class="keywordtype">size_t</span> size);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">void</span> adddata(<a class="code" href="class_c_serialized_value.html">CSerializedValue</a> *val);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;};</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="structnode.html">   61</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnode.html">node</a></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classas_i_lockable_shared_bool.html">asILockableSharedBool</a> *weakRefFlag;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    uint parent;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="structvector.html">vector&lt;uint&gt;</a> children;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    str name, tags; <span class="comment">//instance name, tag to classify data, set on a per object basis, allows it to search by these break tags up by space</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">int</span> refcount; <span class="comment">//for weak reference</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="structvector.html">vector&lt;asIScriptObject *&gt;</a> ctrl; <span class="comment">//link to the script functions on* funcitons</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// position or start origin of the object</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="structbulletobj.html">bulletobj</a> *b;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="structvec.html">vec</a> o, rot, radius; <span class="comment">//readius should not be changed, this is used to get a general idea of the bounds of the visual reprentation</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="structvec.html">vec</a> old_o, old_rot; <span class="comment">//store the data before we move it</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="class_c_serialized_value.html">CSerializedValue</a> *c; <span class="comment">//stored game data for said object;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">//editnode *en;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">void</span> store();</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">bool</span> restore();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="structnode.html">node</a>(<a class="code" href="structvec.html">vec</a> pos, str name = <span class="stringliteral">&quot;unnamed&quot;</span>, str tags = <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="structnode.html">node</a>(<a class="code" href="structvec.html">vec</a> pos, <a class="code" href="structvec.html">vec</a> rotation);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">int</span> addref();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">int</span> release();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classas_i_lockable_shared_bool.html">asILockableSharedBool</a> *getweakflagref();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">//void seteditbox(vec &amp;rad);</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">void</span> seteditbox(<span class="keywordtype">int</span> i);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">void</span> updatefrombullet();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">void</span> doupdate();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">void</span> doawake();</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">void</span> dorender();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">void</span> restart();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">void</span> move(<a class="code" href="structvec.html">vec</a> impulse);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">void</span> moveto(<a class="code" href="structvec.html">vec</a> _o);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">void</span> rotate(<a class="code" href="structvec.html">vec</a> impulse, <span class="keywordtype">bool</span> degrees = <span class="keyword">true</span>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">void</span> rotateto(<a class="code" href="structvec.html">vec</a> rot, <span class="keywordtype">bool</span> degrees = <span class="keyword">true</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">void</span> rotateto(<span class="keywordtype">float</span> impy, <span class="keywordtype">float</span> impp, <span class="keywordtype">float</span> impr, <span class="keywordtype">bool</span> deg = <span class="keyword">true</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">void</span> rotate(<span class="keywordtype">float</span> yaw, <span class="keywordtype">float</span> pitch, <span class="keywordtype">float</span> roll, <span class="keywordtype">bool</span> deg = <span class="keyword">true</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">void</span> setfriction(<span class="keywordtype">float</span> f);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">void</span> setelasticity(<span class="keywordtype">float</span> e);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">void</span> setgravity(<span class="keywordtype">float</span> g);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">void</span> setupbulletfrommodel(<span class="keywordtype">int</span> indx);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">void</span> setupbulletfrommodel(str name);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">void</span> setupbulletfromaabb(<a class="code" href="structvec.html">vec</a> offset, <a class="code" href="structvec.html">vec</a> size, <span class="keywordtype">float</span> friction = 0.3f, <span class="keywordtype">float</span> elasticity = 0.8f); <span class="comment">// add more properties later</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">void</span> setupbulletfromcylender(<a class="code" href="structvec.html">vec</a> offset, <span class="keywordtype">float</span> radius, <span class="keywordtype">float</span> height, <span class="keywordtype">float</span> friction = 0.3f, <span class="keywordtype">float</span> elasticity = 0.8f);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    ~<a class="code" href="structnode.html">node</a>();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;};</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structsoundemit.html">  107</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structsoundemit.html">soundemit</a></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    uint index;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    uint vol;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    uint id;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;};</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">enum</span> SCENE_FLAGS</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    SCENE_NO_RENDER         =   1 &lt;&lt; 0, <span class="comment">//dont render this scene; set when scene is not in the view fustrum</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    SCENE_NO_UPDATE         =   1 &lt;&lt; 1, <span class="comment">//dont update this scene; set when this part of the world is to far from the player to update</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    SCENE_WANTS_LOAD        =   1 &lt;&lt; 2, <span class="comment">//**This scene wants to load when there is time left over; set this when scene is close enough to back load;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    SCENE_WANTS_NO_UPDATE   =   1 &lt;&lt; 3, <span class="comment">//**This scene wants to stop being active; Set this when player is leaving the area Well convinute to check the players position to make sure that he doesnt come back then will move to SCENCE_NOUPDATE</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    SCENE_SLOW_UPDATE       =   1 &lt;&lt; 4, <span class="comment">//**This scene is not in top priority to update, update this scene as allowed by the extra processing time. This will spread the update over multipule frames. You should turn Physics off and work off of waypoints or similar system</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    SCENE_NO_PHYSICS        =   1 &lt;&lt; 5 <span class="comment">//**Turns off PHysics calls should rely on prediction. DO this when player is out of the Scene but Scene still needs basic updating. Should be set with SCENE_SLOWUPDATE to use optimization. Wait till all objects are island sleep if Physics less update is not needed (ie say a puzzle game)</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">//** we will set these up later when we get a better framwork</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;};</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structscenegraph.html">  125</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structscenegraph.html">scenegraph</a> </div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="structvector.html">vector&lt;node *&gt;</a> nodes;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    uchar id;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    str name;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">char</span> flags; <span class="comment">//uses SCENEFLAGS</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">//physics handled on the world level</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="structvector.html">vector&lt;light *&gt;</a> slights;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="structvector.html">vector&lt;node *&gt;</a> &amp;getnodes(){ <span class="keywordflow">return</span> nodes; }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">const</span> <a class="code" href="structvector.html">vector&lt;light *&gt;</a> getlights() </div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (flags |= SCENE_NO_RENDER) slights.deletecontents();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">return</span> slights;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">//  void pausescene(short force = -1){ paused = force == -1 ? !paused : bool(force); }</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">bool</span> ispaused(){ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">void</span> addobject(<a class="code" href="structnode.html">node</a> *gn) { <span class="keywordflow">if</span> (!gn) <span class="keywordflow">return</span>; nodes.add(gn); }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">void</span> clearworld()</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        nodes.deletecontents();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">//add in the load from file here</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">//read and load nodes</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordtype">void</span> resetworld()</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordtype">int</span> a = nodes.length();</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="structvector.html">vector&lt;node*&gt;</a> nd;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        print(str(<span class="stringliteral">&quot;helo world&quot;</span>));</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        loopi(a)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <a class="code" href="structnode.html">node</a> *g = nodes[i];</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span> (!g-&gt;restore())</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keyword">delete</span> g;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">else</span>{</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                nd.add(g);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="comment">//g-&gt;restart();</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        asScript-&gt;serializer-&gt;ClearRoot();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        nodes = nd;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">//loopv(nodes)nodes[i]-&gt;doawake();</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">//if (nodes.length()) nodes.deletecontents();</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">//loopv(editnodes)</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">//{</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">//  editnode *en = editnodes[i];</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">//  node *g = new node(vec(en-&gt;o));</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">//  g-&gt;ctrl = asScript-&gt;CreateController(en-&gt;name, g);</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">//  g-&gt;e = en; en-&gt;g = g;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">//  if(!g-&gt;c) g-&gt;c = asScript-&gt;serializer-&gt;storenode(g);</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">//  else g-&gt;c-&gt;Restore(g, CSerialnode::getID());</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">//  </span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">//  asScript-&gt;doStart(g-&gt;ctrl);</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">//  nodes.add(g);</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="comment">//}</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">void</span> preloadentities(); <span class="comment">//load all the enties at gamestart get this list from the map file</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">void</span> doawake()</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        loopv(nodes){ nodes[i]-&gt;doawake();}</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        </div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">void</span> updatenodes()</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        loopv(nodes)nodes[i]-&gt;updatefrombullet();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        loopv(nodes) nodes[i]-&gt;doupdate();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">void</span> rendernodes()</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        loopv(nodes) { nodes[i]-&gt;dorender(); }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">//loopv(nodes) { nodes[i]-&gt;dogui(); } // do gui calls after may need to do this in a different function call</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">void</span> store()</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        loopv(nodes) nodes[i]-&gt;store();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span> savescene(<a class="code" href="structstream.html">stream</a> *f)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">//if (curworld-&gt;touched) //only reset the world if some one moved shit</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        resetworld(); <span class="comment">//clear the tree before starting the save </span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        store(); <span class="comment">//save the curent objects</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">//if want to save the data in the map just clear the tree and then do a store this will save the world in its current state</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">//print(nodes.length());</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        asScript-&gt;serializer-&gt;save(f);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">void</span> loadscene(<a class="code" href="structstream.html">stream</a> *f)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        asScript-&gt;serializer-&gt;load(f);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    ~<a class="code" href="structscenegraph.html">scenegraph</a>()</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (nodes.length()) nodes.deletecontents();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keyword">delete</span> &amp;nodes;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">void</span> updateregistaredobjects()</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;};</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">//definition of world declaration is in the bottom of world.cpp</span></div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structworld.html">  230</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structworld.html">world</a></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structworld_1_1nodemgr.html">  232</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structworld_1_1nodemgr.html">nodemgr</a></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">private</span>:</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        </div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="structnode.html">node</a> *newnode();  <span class="comment">//call to get a new node from scratch; recieve the node</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        uint newnode(<a class="code" href="structnode.html">node</a> *n); <span class="comment">//class to copy an existing node; recieve the id</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordtype">bool</span> removenode(uint <span class="keywordtype">id</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordtype">bool</span> removenode(<a class="code" href="structnode.html">node</a> *n);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="structnode.html">node</a> *root;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="structvector.html">vector&lt;node *&gt;</a> nodes();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    };</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> nodehover, oldhover, nodeorient, nfocus, nodemoving = 0;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="structvector.html">vector&lt;uint&gt;</a> physicbodies;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">//int nodemoving = 0;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="structvector.html">vector&lt;int&gt;</a> nodeselect;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="structscenegraph.html">scenegraph</a> *curscene;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">bool</span> nodeselsnap = <span class="keyword">false</span>, nodeediting = <span class="keyword">true</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">int</span> spotlights, volumetriclights, nodelooplevel;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">bool</span> paused = <span class="keyword">false</span>, touched = <span class="keyword">false</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="structvector.html">vector&lt;light *&gt;</a> lights;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">//vector&lt;scenegraph *&gt; scenes; add later</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="structworld.html">world</a>(<a class="code" href="structscenegraph.html">scenegraph</a> *s);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> nonodeedit();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">void</span> addlight(<a class="code" href="structvec.html">vec</a> o, <a class="code" href="structvec.html">vec</a> color, <span class="keywordtype">int</span> radius, <span class="keywordtype">char</span> type);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">bool</span> haveselnode();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">void</span> nodeselcancel();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">void</span> nodeseladd(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="structvec.html">vec</a> getselpos();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="structvector.html">vector&lt;node *&gt;</a> getselnodes();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="structvector.html">vector&lt;light *&gt;</a> getlights();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">void</span> serializedworld();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">void</span> updateworld();</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">void</span> clearworld(<span class="keywordtype">bool</span> force = <span class="keyword">false</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">void</span> rendernodeselection(<span class="keyword">const</span> <a class="code" href="structvec.html">vec</a> &amp;o, <span class="keyword">const</span> <a class="code" href="structvec.html">vec</a> &amp;ray, <span class="keywordtype">bool</span> nodemoving);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    uint getnumnodes();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">void</span> addnodetoscene(<a class="code" href="structnode.html">node</a> *g);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">void</span> rendernodes();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordtype">bool</span> ispaused() { <span class="keywordflow">return</span> paused; }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">bool</span> hoveringonnode(<span class="keywordtype">int</span> <a class="code" href="structnode.html">node</a>, <span class="keywordtype">int</span> orient);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">float</span> getnearestent(<span class="keyword">const</span> <a class="code" href="structvec.html">vec</a> &amp;o, <span class="keyword">const</span> <a class="code" href="structvec.html">vec</a> &amp;ray, <span class="keywordtype">float</span> radius, <span class="keywordtype">int</span> mode, <span class="keywordtype">int</span> &amp;hitnode);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">void</span> saveworld(<a class="code" href="structstream.html">stream</a> *f);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">void</span> loadworld(<a class="code" href="structstream.html">stream</a> *f) { curscene-&gt;loadscene(f); }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">void</span> doAwake() { curscene-&gt;doawake(); }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">void</span> addctrltonode(str name, <span class="keywordtype">bool</span> first);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">//undo add later</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">//undoblock *newundoent();</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">//void makeundoent();</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">//undoblock *copyundoents(undoblock *u);</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">//void pasteundoent(int idx, const entity &amp;ue);</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">//void pasteundoents(undoblock *u)</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">//nessary functions that need recoded</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">//void detachentity(extentity &amp;e);</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">//void entflip();</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">//void entrotate(int *cw);</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">//void startmap(const char *name)</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">//bool emptymap(int scale, bool force, const char *mname, bool usecfg) </span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">//bool enlargemap(bool force)</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">//void entautoview(int *dir);</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">//  bool pointinsel(const selinfo &amp;sel, const vec &amp;o);</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">//bool editmoveplane(const vec &amp;o, const vec &amp;ray, int d, float off, vec &amp;handle, vec &amp;dest, bool first);</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">void</span> nodedrag(<span class="keyword">const</span> <a class="code" href="structvec.html">vec</a> &amp;ray);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">void</span> delnode();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">void</span> resetmap();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;};</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">//struct ModelCtrl : IController</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">//{</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">//  model *m;</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">//};</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">//enum {BT_SHAPE_BOX = 0, BT_SHAPE_SPHERE, BT_SHAPE_BULLET, BT_SHAPE_CYLLENDER};</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">//struct PhysicsCtrl : IController</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">//{</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">//  btRigidBody *btBody;</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">//  float friction, weight, restitution, ldamp, adamp;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">//  vec gravity, afactor, lfactor;</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">//  int type;</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">//};</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">//struct LightCtrl : IController</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">//{</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">//  vec4 lightvec;</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">//  vec4 type;</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//  //add more later</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">//  void render()</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">//  {</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">//};</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">//struct ParticleCtrl : IController</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">//{</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">//  int type;</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">//  vec gravity, color, size;</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">//  void update()</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">//  {</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">//  void render()</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">//  {</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//};</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keyword">extern</span> <a class="code" href="structworld.html">world</a> *curworld;</div><div class="ttc" id="structobj_html"><div class="ttname"><a href="structobj.html">obj</a></div><div class="ttdef"><b>Definition:</b> obj.h:3</div></div>
<div class="ttc" id="class_c_serialized_value_html"><div class="ttname"><a href="class_c_serialized_value.html">CSerializedValue</a></div><div class="ttdef"><b>Definition:</b> serializer.h:71</div></div>
<div class="ttc" id="structvector_html"><div class="ttname"><a href="structvector.html">vector&lt; uint &gt;</a></div></div>
<div class="ttc" id="structnode_html"><div class="ttname"><a href="structnode.html">node</a></div><div class="ttdef"><b>Definition:</b> node.h:61</div></div>
<div class="ttc" id="structworld_html"><div class="ttname"><a href="structworld.html">world</a></div><div class="ttdef"><b>Definition:</b> node.h:230</div></div>
<div class="ttc" id="structridgidbody_html"><div class="ttname"><a href="structridgidbody.html">ridgidbody</a></div><div class="ttdef"><b>Definition:</b> node.h:25</div></div>
<div class="ttc" id="classas_i_lockable_shared_bool_html"><div class="ttname"><a href="classas_i_lockable_shared_bool.html">asILockableSharedBool</a></div><div class="ttdef"><b>Definition:</b> angelscript.h:1201</div></div>
<div class="ttc" id="structworld_1_1nodemgr_html"><div class="ttname"><a href="structworld_1_1nodemgr.html">world::nodemgr</a></div><div class="ttdef"><b>Definition:</b> node.h:232</div></div>
<div class="ttc" id="structbulletobj_html"><div class="ttname"><a href="structbulletobj.html">bulletobj</a></div><div class="ttdef"><b>Definition:</b> node.h:36</div></div>
<div class="ttc" id="structsoundemit_html"><div class="ttname"><a href="structsoundemit.html">soundemit</a></div><div class="ttdef"><b>Definition:</b> node.h:107</div></div>
<div class="ttc" id="structvec_html"><div class="ttname"><a href="structvec.html">vec</a></div><div class="ttdef"><b>Definition:</b> geom.h:117</div></div>
<div class="ttc" id="structlight_html"><div class="ttname"><a href="structlight.html">light</a></div><div class="ttdef"><b>Definition:</b> engine.h:301</div></div>
<div class="ttc" id="structstream_html"><div class="ttname"><a href="structstream.html">stream</a></div><div class="ttdef"><b>Definition:</b> tools.h:1248</div></div>
<div class="ttc" id="structscenegraph_html"><div class="ttname"><a href="structscenegraph.html">scenegraph</a></div><div class="ttdef"><b>Definition:</b> node.h:125</div></div>
<div class="ttc" id="structscriptinterface_html"><div class="ttname"><a href="structscriptinterface.html">scriptinterface</a></div><div class="ttdef"><b>Definition:</b> node.h:48</div></div>
<div class="ttc" id="classas_i_script_object_html"><div class="ttname"><a href="classas_i_script_object.html">asIScriptObject</a></div><div class="ttdef"><b>Definition:</b> angelscript.h:1023</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
